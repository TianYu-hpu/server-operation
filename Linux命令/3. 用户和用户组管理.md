# 用户和用户组管理
## 用户配置文件  
### 用户信息文件 /etc/passwd
越是对服务器安全性要求高的服务器，越需要建立合理的用户权限等级制度和服务器操作规范，在 linux 中主要是通过用户配置文件来查看和修改用户信息  
第一字段: 用户名称  
第二字段: 密码标志  
第三字段: UID（用户ID）  
- 0 超级用户  
- 1-499 系统用户(伪用户)  
- 500-65535 普通用户  
第四字段:用户组（GID 用户初始组ID）  
- 初始组  
就是用户一登录就like拥有这个用户组的相关权限，每个用户的初始组只能有一个，默认就是和这个用户的用户名相同的组名作为这个用户的初始组  
- 附加组  
指用户可以加入多个其他的用户组，并拥有这些组的权限，附加组可以有多个  
第五字段:用户说明    
第六字段:家目录  
第七字段:登陆之后的shell
### 密码文件 /etc/shadow
第1个字段：用户名    
第2个字段：加密后的密码    
 - 加密算法为SHA512散列加密算法，如果密码位是 !! 或 * 代表没有密码，不能登录  
第3个字段：密码最后一次修改日期，设置密码的时间，时间戳表示，1970年1月1号到现在的天数，每增加一天相应的值 +1；  
第4个字段：两次密码的修改间隔  
第5个字段：密码有效期(密码时效性原则)  
第6个字段：到密码有效期的前多少天提示用户要改密码  
第7个字段：密码过期之后的宽限天数  
第8个字段：账号失效时间    
第9个字段：保留  
时间戳:表示从1970年1月1日到现在的天数，时间戳与日期换算  
把时间戳换算为日期  

	date -d "1970-01-01 16056 days"
把日期换算为时间戳  

	echo $(($(date -- date= "2014/01/06" + %s) / 86400+1))
### 组信息文件 /etc/group 
第1字段:组名  
第2字段:组密码(不常见)，root用户给每个用户组分配一个“组管理员”,这个组管理员可以创建组密码用于添加和删除组用户    
第3字段:GID  
第4字段:组中附加用户   
### 组密码文件 /etc/gshadow
第1字段:组名  
第2字段:组密码(不常见)，root用户给每个用户组分配一个“组管理员”,这个组管理员可以创建组密码用于添加和删除组用户    
第3字段:组管理员用户名 
第4字段:组中附加用户
## 用户管理相关文件
### 用户家目录
1. 普通用户: /home/用户名 所有者和所属组都是此用户，权限默认是700   
2. root用户: /root， 所有者和所属组都是root,权限默认550
### 用户的邮箱  
/var/spool/mail/用户名  
### 用户模板目录  
/etc/skel, 家目录下的隐藏文件都是从这个目录下拷贝过来的   
## 用户管理命令
useradd 用户名
passwd 用户名
创建用户的缺省设置从哪里来的 
/etc/default/useradd  
GROUP=100 				用户默认组
HOME=/home 				用户家目录  
INACTIVE=-1				密码过期宽限天数(shadow文件第7字段)  
EXPIRE=					密码时效时间(shadow 第8个字段)  
SHELL=/bin/bash			默认shell  
SKEL=/etc/skel			模板目录  
CREATE_MAIL_SPOOL=yes	是否建立邮箱  

用户创建时密码设置的默认配置文件
/etc/login.defs  
PASS_MAX_DAYS 	99999		密码有效期  
PASS_MIN_DAYS	0			密码修改间隔  
PASS_MIN_LEN	5			密码最小位数  
PASS_WARN_AGE	7			密码到期警告  
UID_MIN			500			最小值和最大值UID范围
UID_MAX			60000	
ENCRYPT_METHOD	SHA512		加密模式  
### 修改用户密码状态 charge  
charge [选项] 用户名  
-l:							列出用户的详细密码状态  
-d:日期						修改密码最后一次更改日期  
-m:天数						两次密码修改间隔  
-M:							密码有效期  
-W							密码过期前警告天数  
-I							密码过后宽限天数  
-E							账号失效时间  
userdel 用户名 删除用户  
userdel -r 用户名:删除用户的时候级联删除用户家目录  
su [选项] 用户名  
- 选项只是用 - 代表连用户的环境变量一起切换，可以使用 env 来查看环境变量信息  
-c 仅执行一次命令，而不切换用户身份  
## 用户组管理命令
groupadd [选项] 组名  
-g GID 指定组ID   
-n 新组名  修改组名  
groupdel 组名  
如果组中有初始用户，则不能删除，如果没有则可以删除  
gpasswd 选项 组名  
-a 用户名   把用户加入组  
-d 用户名	把用户从组中删除    